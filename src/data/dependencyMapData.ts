/**
 * Application Dependency Map - Mock Data
 * Realistic service topology with microservices, databases, and external dependencies
 */

import type {
  Service,
  ServiceConnection,
  ServiceIssue,
  ServiceTopology,
  TopologyLayout,
  TopologyMetrics,
} from '../types/dependencyMap';

export const services: Service[] = [
  // Frontend Services
  {
    id: 'web-app',
    name: 'web-app',
    displayName: 'Web Application',
    tier: 'frontend',
    version: '2.5.3',
    description: 'Main customer-facing web application',
    owner: 'frontend-team@company.com',
    team: 'Frontend Engineering',
    repository: 'github.com/company/web-app',
    endpoint: {
      protocol: 'https',
      host: 'app.company.com',
      port: 443,
      path: '/',
    },
    health: {
      status: 'healthy',
      uptime: 99.95,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 98,
      incidents: 2,
    },
    metrics: {
      requestsPerSecond: 1250,
      avgLatencyMs: 85,
      errorRate: 0.15,
      cpuUsage: 45,
      memoryUsage: 68,
      activeConnections: 3420,
    },
    dependencies: [
      {
        targetServiceId: 'api-gateway',
        type: 'api',
        protocol: 'https',
        latencyMs: 25,
        requestsPerSecond: 1200,
        errorRate: 0.1,
        critical: true,
      },
      {
        targetServiceId: 'cdn',
        type: 'external',
        protocol: 'https',
        latencyMs: 15,
        requestsPerSecond: 5000,
        errorRate: 0.05,
        critical: false,
      },
    ],
    tags: ['react', 'nextjs', 'production', 'customer-facing'],
    environment: 'production',
    region: 'us-east-1',
    instances: 8,
    containerImage: 'company/web-app:2.5.3',
  },
  {
    id: 'mobile-api',
    name: 'mobile-api',
    displayName: 'Mobile API Gateway',
    tier: 'frontend',
    version: '1.8.2',
    description: 'API gateway for mobile applications',
    owner: 'mobile-team@company.com',
    team: 'Mobile Engineering',
    endpoint: {
      protocol: 'https',
      host: 'mobile-api.company.com',
      port: 443,
      path: '/api/v1',
    },
    health: {
      status: 'healthy',
      uptime: 99.92,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 96,
      incidents: 3,
    },
    metrics: {
      requestsPerSecond: 850,
      avgLatencyMs: 95,
      errorRate: 0.2,
      cpuUsage: 38,
      memoryUsage: 55,
      activeConnections: 2100,
    },
    dependencies: [
      {
        targetServiceId: 'api-gateway',
        type: 'api',
        protocol: 'https',
        latencyMs: 30,
        requestsPerSecond: 800,
        errorRate: 0.15,
        critical: true,
      },
    ],
    tags: ['kotlin', 'production', 'mobile'],
    environment: 'production',
    region: 'us-east-1',
    instances: 6,
    containerImage: 'company/mobile-api:1.8.2',
  },

  // Backend Services
  {
    id: 'api-gateway',
    name: 'api-gateway',
    displayName: 'API Gateway',
    tier: 'backend',
    version: '3.2.1',
    description: 'Central API gateway for all backend services',
    owner: 'platform-team@company.com',
    team: 'Platform Engineering',
    repository: 'github.com/company/api-gateway',
    endpoint: {
      protocol: 'https',
      host: 'api.company.com',
      port: 443,
      path: '/api',
    },
    health: {
      status: 'healthy',
      uptime: 99.98,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 99,
      incidents: 1,
    },
    metrics: {
      requestsPerSecond: 3500,
      avgLatencyMs: 45,
      errorRate: 0.08,
      cpuUsage: 62,
      memoryUsage: 75,
      activeConnections: 8500,
    },
    dependencies: [
      {
        targetServiceId: 'auth-service',
        type: 'api',
        protocol: 'grpc',
        latencyMs: 12,
        requestsPerSecond: 3200,
        errorRate: 0.05,
        critical: true,
      },
      {
        targetServiceId: 'user-service',
        type: 'api',
        protocol: 'grpc',
        latencyMs: 18,
        requestsPerSecond: 2800,
        errorRate: 0.06,
        critical: true,
      },
      {
        targetServiceId: 'order-service',
        type: 'api',
        protocol: 'grpc',
        latencyMs: 22,
        requestsPerSecond: 1500,
        errorRate: 0.1,
        critical: true,
      },
      {
        targetServiceId: 'redis-cache',
        type: 'cache',
        protocol: 'redis',
        latencyMs: 3,
        requestsPerSecond: 5000,
        errorRate: 0.02,
        critical: true,
      },
    ],
    tags: ['node', 'express', 'production', 'critical'],
    environment: 'production',
    region: 'us-east-1',
    instances: 12,
    containerImage: 'company/api-gateway:3.2.1',
  },
  {
    id: 'auth-service',
    name: 'auth-service',
    displayName: 'Authentication Service',
    tier: 'backend',
    version: '2.1.0',
    description: 'User authentication and authorization',
    owner: 'security-team@company.com',
    team: 'Security Engineering',
    endpoint: {
      protocol: 'grpc',
      host: 'auth.internal.company.com',
      port: 50051,
    },
    health: {
      status: 'healthy',
      uptime: 99.99,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 100,
      incidents: 0,
    },
    metrics: {
      requestsPerSecond: 3200,
      avgLatencyMs: 15,
      errorRate: 0.03,
      cpuUsage: 28,
      memoryUsage: 42,
      activeConnections: 1200,
    },
    dependencies: [
      {
        targetServiceId: 'postgres-users',
        type: 'database',
        protocol: 'sql',
        latencyMs: 8,
        requestsPerSecond: 2500,
        errorRate: 0.01,
        critical: true,
      },
      {
        targetServiceId: 'redis-cache',
        type: 'cache',
        protocol: 'redis',
        latencyMs: 2,
        requestsPerSecond: 4000,
        errorRate: 0.01,
        critical: true,
      },
    ],
    tags: ['java', 'spring-boot', 'production', 'security'],
    environment: 'production',
    region: 'us-east-1',
    instances: 10,
    containerImage: 'company/auth-service:2.1.0',
  },
  {
    id: 'user-service',
    name: 'user-service',
    displayName: 'User Management Service',
    tier: 'backend',
    version: '1.9.5',
    description: 'User profile and account management',
    owner: 'backend-team@company.com',
    team: 'Backend Engineering',
    endpoint: {
      protocol: 'grpc',
      host: 'users.internal.company.com',
      port: 50052,
    },
    health: {
      status: 'degraded',
      uptime: 98.5,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 82,
      incidents: 5,
    },
    metrics: {
      requestsPerSecond: 2800,
      avgLatencyMs: 125,
      errorRate: 1.2,
      cpuUsage: 78,
      memoryUsage: 85,
      activeConnections: 950,
    },
    dependencies: [
      {
        targetServiceId: 'postgres-users',
        type: 'database',
        protocol: 'sql',
        latencyMs: 95,
        requestsPerSecond: 2200,
        errorRate: 0.8,
        critical: true,
      },
      {
        targetServiceId: 's3-storage',
        type: 'storage',
        protocol: 'https',
        latencyMs: 45,
        requestsPerSecond: 500,
        errorRate: 0.1,
        critical: false,
      },
    ],
    tags: ['python', 'django', 'production'],
    environment: 'production',
    region: 'us-east-1',
    instances: 8,
    containerImage: 'company/user-service:1.9.5',
  },
  {
    id: 'order-service',
    name: 'order-service',
    displayName: 'Order Processing Service',
    tier: 'backend',
    version: '2.3.1',
    description: 'Order creation and management',
    owner: 'commerce-team@company.com',
    team: 'Commerce Engineering',
    endpoint: {
      protocol: 'grpc',
      host: 'orders.internal.company.com',
      port: 50053,
    },
    health: {
      status: 'healthy',
      uptime: 99.8,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 95,
      incidents: 2,
    },
    metrics: {
      requestsPerSecond: 1500,
      avgLatencyMs: 68,
      errorRate: 0.25,
      cpuUsage: 52,
      memoryUsage: 65,
      activeConnections: 720,
    },
    dependencies: [
      {
        targetServiceId: 'postgres-orders',
        type: 'database',
        protocol: 'sql',
        latencyMs: 35,
        requestsPerSecond: 1200,
        errorRate: 0.15,
        critical: true,
      },
      {
        targetServiceId: 'payment-service',
        type: 'api',
        protocol: 'grpc',
        latencyMs: 85,
        requestsPerSecond: 800,
        errorRate: 0.3,
        critical: true,
      },
      {
        targetServiceId: 'inventory-service',
        type: 'api',
        protocol: 'grpc',
        latencyMs: 42,
        requestsPerSecond: 900,
        errorRate: 0.2,
        critical: true,
      },
      {
        targetServiceId: 'kafka-events',
        type: 'messaging',
        protocol: 'amqp',
        latencyMs: 8,
        requestsPerSecond: 1500,
        errorRate: 0.05,
        critical: false,
      },
    ],
    tags: ['go', 'production', 'commerce'],
    environment: 'production',
    region: 'us-east-1',
    instances: 10,
    containerImage: 'company/order-service:2.3.1',
  },
  {
    id: 'payment-service',
    name: 'payment-service',
    displayName: 'Payment Processing Service',
    tier: 'backend',
    version: '1.5.2',
    description: 'Payment gateway integration and processing',
    owner: 'finance-team@company.com',
    team: 'Finance Engineering',
    endpoint: {
      protocol: 'grpc',
      host: 'payments.internal.company.com',
      port: 50054,
    },
    health: {
      status: 'healthy',
      uptime: 99.95,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 97,
      incidents: 1,
    },
    metrics: {
      requestsPerSecond: 800,
      avgLatencyMs: 180,
      errorRate: 0.35,
      cpuUsage: 35,
      memoryUsage: 48,
      activeConnections: 420,
    },
    dependencies: [
      {
        targetServiceId: 'postgres-payments',
        type: 'database',
        protocol: 'sql',
        latencyMs: 25,
        requestsPerSecond: 750,
        errorRate: 0.1,
        critical: true,
      },
      {
        targetServiceId: 'stripe-api',
        type: 'external',
        protocol: 'https',
        latencyMs: 120,
        requestsPerSecond: 600,
        errorRate: 0.2,
        critical: true,
      },
    ],
    tags: ['java', 'spring-boot', 'production', 'pci-compliant'],
    environment: 'production',
    region: 'us-east-1',
    instances: 6,
    containerImage: 'company/payment-service:1.5.2',
  },
  {
    id: 'inventory-service',
    name: 'inventory-service',
    displayName: 'Inventory Management Service',
    tier: 'backend',
    version: '1.4.0',
    description: 'Product inventory tracking',
    owner: 'warehouse-team@company.com',
    team: 'Warehouse Engineering',
    endpoint: {
      protocol: 'grpc',
      host: 'inventory.internal.company.com',
      port: 50055,
    },
    health: {
      status: 'healthy',
      uptime: 99.7,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 94,
      incidents: 3,
    },
    metrics: {
      requestsPerSecond: 950,
      avgLatencyMs: 52,
      errorRate: 0.18,
      cpuUsage: 42,
      memoryUsage: 58,
      activeConnections: 580,
    },
    dependencies: [
      {
        targetServiceId: 'postgres-inventory',
        type: 'database',
        protocol: 'sql',
        latencyMs: 28,
        requestsPerSecond: 850,
        errorRate: 0.12,
        critical: true,
      },
      {
        targetServiceId: 'redis-cache',
        type: 'cache',
        protocol: 'redis',
        latencyMs: 4,
        requestsPerSecond: 1200,
        errorRate: 0.03,
        critical: false,
      },
    ],
    tags: ['node', 'production'],
    environment: 'production',
    region: 'us-east-1',
    instances: 7,
    containerImage: 'company/inventory-service:1.4.0',
  },
  {
    id: 'notification-service',
    name: 'notification-service',
    displayName: 'Notification Service',
    tier: 'backend',
    version: '1.2.3',
    description: 'Email, SMS, and push notifications',
    owner: 'platform-team@company.com',
    team: 'Platform Engineering',
    endpoint: {
      protocol: 'grpc',
      host: 'notifications.internal.company.com',
      port: 50056,
    },
    health: {
      status: 'healthy',
      uptime: 99.6,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 93,
      incidents: 4,
    },
    metrics: {
      requestsPerSecond: 650,
      avgLatencyMs: 220,
      errorRate: 0.45,
      cpuUsage: 38,
      memoryUsage: 52,
      activeConnections: 320,
    },
    dependencies: [
      {
        targetServiceId: 'kafka-events',
        type: 'messaging',
        protocol: 'amqp',
        latencyMs: 12,
        requestsPerSecond: 650,
        errorRate: 0.08,
        critical: true,
      },
      {
        targetServiceId: 'sendgrid-api',
        type: 'external',
        protocol: 'https',
        latencyMs: 150,
        requestsPerSecond: 400,
        errorRate: 0.25,
        critical: false,
      },
      {
        targetServiceId: 'twilio-api',
        type: 'external',
        protocol: 'https',
        latencyMs: 180,
        requestsPerSecond: 150,
        errorRate: 0.3,
        critical: false,
      },
    ],
    tags: ['python', 'celery', 'production'],
    environment: 'production',
    region: 'us-east-1',
    instances: 5,
    containerImage: 'company/notification-service:1.2.3',
  },

  // Database Services
  {
    id: 'postgres-users',
    name: 'postgres-users',
    displayName: 'User Database (PostgreSQL)',
    tier: 'database',
    version: '14.5',
    description: 'Primary database for user data',
    owner: 'dba-team@company.com',
    team: 'Database Administration',
    endpoint: {
      protocol: 'sql',
      host: 'users-db.internal.company.com',
      port: 5432,
    },
    health: {
      status: 'degraded',
      uptime: 99.2,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 85,
      incidents: 6,
    },
    metrics: {
      requestsPerSecond: 4700,
      avgLatencyMs: 45,
      errorRate: 0.35,
      cpuUsage: 82,
      memoryUsage: 88,
      activeConnections: 450,
    },
    dependencies: [],
    tags: ['postgresql', 'production', 'critical'],
    environment: 'production',
    region: 'us-east-1',
    instances: 3,
  },
  {
    id: 'postgres-orders',
    name: 'postgres-orders',
    displayName: 'Order Database (PostgreSQL)',
    tier: 'database',
    version: '14.5',
    description: 'Primary database for order data',
    owner: 'dba-team@company.com',
    team: 'Database Administration',
    endpoint: {
      protocol: 'sql',
      host: 'orders-db.internal.company.com',
      port: 5432,
    },
    health: {
      status: 'healthy',
      uptime: 99.85,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 96,
      incidents: 2,
    },
    metrics: {
      requestsPerSecond: 1200,
      avgLatencyMs: 28,
      errorRate: 0.12,
      cpuUsage: 58,
      memoryUsage: 72,
      activeConnections: 280,
    },
    dependencies: [],
    tags: ['postgresql', 'production'],
    environment: 'production',
    region: 'us-east-1',
    instances: 2,
  },
  {
    id: 'postgres-payments',
    name: 'postgres-payments',
    displayName: 'Payment Database (PostgreSQL)',
    tier: 'database',
    version: '14.5',
    description: 'Encrypted database for payment data',
    owner: 'dba-team@company.com',
    team: 'Database Administration',
    endpoint: {
      protocol: 'sql',
      host: 'payments-db.internal.company.com',
      port: 5432,
    },
    health: {
      status: 'healthy',
      uptime: 99.95,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 98,
      incidents: 1,
    },
    metrics: {
      requestsPerSecond: 750,
      avgLatencyMs: 22,
      errorRate: 0.08,
      cpuUsage: 42,
      memoryUsage: 65,
      activeConnections: 180,
    },
    dependencies: [],
    tags: ['postgresql', 'production', 'encrypted', 'pci-compliant'],
    environment: 'production',
    region: 'us-east-1',
    instances: 2,
  },
  {
    id: 'postgres-inventory',
    name: 'postgres-inventory',
    displayName: 'Inventory Database (PostgreSQL)',
    tier: 'database',
    version: '14.5',
    description: 'Database for inventory tracking',
    owner: 'dba-team@company.com',
    team: 'Database Administration',
    endpoint: {
      protocol: 'sql',
      host: 'inventory-db.internal.company.com',
      port: 5432,
    },
    health: {
      status: 'healthy',
      uptime: 99.75,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 95,
      incidents: 2,
    },
    metrics: {
      requestsPerSecond: 850,
      avgLatencyMs: 25,
      errorRate: 0.1,
      cpuUsage: 48,
      memoryUsage: 68,
      activeConnections: 220,
    },
    dependencies: [],
    tags: ['postgresql', 'production'],
    environment: 'production',
    region: 'us-east-1',
    instances: 2,
  },

  // Cache Services
  {
    id: 'redis-cache',
    name: 'redis-cache',
    displayName: 'Redis Cache Cluster',
    tier: 'cache',
    version: '7.0.5',
    description: 'Distributed cache for session and data caching',
    owner: 'platform-team@company.com',
    team: 'Platform Engineering',
    endpoint: {
      protocol: 'redis',
      host: 'cache.internal.company.com',
      port: 6379,
    },
    health: {
      status: 'healthy',
      uptime: 99.98,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 99,
      incidents: 0,
    },
    metrics: {
      requestsPerSecond: 10200,
      avgLatencyMs: 2,
      errorRate: 0.01,
      cpuUsage: 35,
      memoryUsage: 78,
      activeConnections: 850,
    },
    dependencies: [],
    tags: ['redis', 'production', 'cache'],
    environment: 'production',
    region: 'us-east-1',
    instances: 6,
  },

  // Queue Services
  {
    id: 'kafka-events',
    name: 'kafka-events',
    displayName: 'Kafka Event Streaming',
    tier: 'queue',
    version: '3.3.1',
    description: 'Event streaming platform for asynchronous messaging',
    owner: 'platform-team@company.com',
    team: 'Platform Engineering',
    endpoint: {
      protocol: 'amqp',
      host: 'kafka.internal.company.com',
      port: 9092,
    },
    health: {
      status: 'healthy',
      uptime: 99.9,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 97,
      incidents: 1,
    },
    metrics: {
      requestsPerSecond: 2150,
      avgLatencyMs: 8,
      errorRate: 0.04,
      cpuUsage: 52,
      memoryUsage: 70,
      activeConnections: 480,
    },
    dependencies: [],
    tags: ['kafka', 'production', 'messaging'],
    environment: 'production',
    region: 'us-east-1',
    instances: 5,
  },

  // External Services
  {
    id: 'cdn',
    name: 'cdn',
    displayName: 'CloudFlare CDN',
    tier: 'external',
    version: 'N/A',
    description: 'Content delivery network',
    owner: 'infrastructure-team@company.com',
    team: 'Infrastructure',
    endpoint: {
      protocol: 'https',
      host: 'cdn.cloudflare.com',
      port: 443,
    },
    health: {
      status: 'healthy',
      uptime: 99.99,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 100,
      incidents: 0,
    },
    metrics: {
      requestsPerSecond: 5000,
      avgLatencyMs: 12,
      errorRate: 0.03,
      cpuUsage: 0,
      memoryUsage: 0,
      activeConnections: 0,
    },
    dependencies: [],
    tags: ['external', 'cdn', 'cloudflare'],
    environment: 'production',
    region: 'global',
    instances: 0,
  },
  {
    id: 'stripe-api',
    name: 'stripe-api',
    displayName: 'Stripe Payment API',
    tier: 'external',
    version: 'N/A',
    description: 'Payment processing provider',
    owner: 'finance-team@company.com',
    team: 'Finance Engineering',
    endpoint: {
      protocol: 'https',
      host: 'api.stripe.com',
      port: 443,
    },
    health: {
      status: 'healthy',
      uptime: 99.95,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 98,
      incidents: 0,
    },
    metrics: {
      requestsPerSecond: 600,
      avgLatencyMs: 120,
      errorRate: 0.2,
      cpuUsage: 0,
      memoryUsage: 0,
      activeConnections: 0,
    },
    dependencies: [],
    tags: ['external', 'payment', 'stripe'],
    environment: 'production',
    region: 'global',
    instances: 0,
  },
  {
    id: 's3-storage',
    name: 's3-storage',
    displayName: 'AWS S3 Storage',
    tier: 'external',
    version: 'N/A',
    description: 'Object storage for user uploads',
    owner: 'platform-team@company.com',
    team: 'Platform Engineering',
    endpoint: {
      protocol: 'https',
      host: 's3.amazonaws.com',
      port: 443,
    },
    health: {
      status: 'healthy',
      uptime: 99.99,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 100,
      incidents: 0,
    },
    metrics: {
      requestsPerSecond: 500,
      avgLatencyMs: 45,
      errorRate: 0.1,
      cpuUsage: 0,
      memoryUsage: 0,
      activeConnections: 0,
    },
    dependencies: [],
    tags: ['external', 'storage', 'aws'],
    environment: 'production',
    region: 'us-east-1',
    instances: 0,
  },
  {
    id: 'sendgrid-api',
    name: 'sendgrid-api',
    displayName: 'SendGrid Email API',
    tier: 'external',
    version: 'N/A',
    description: 'Email delivery service',
    owner: 'platform-team@company.com',
    team: 'Platform Engineering',
    endpoint: {
      protocol: 'https',
      host: 'api.sendgrid.com',
      port: 443,
    },
    health: {
      status: 'healthy',
      uptime: 99.9,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 96,
      incidents: 1,
    },
    metrics: {
      requestsPerSecond: 400,
      avgLatencyMs: 150,
      errorRate: 0.25,
      cpuUsage: 0,
      memoryUsage: 0,
      activeConnections: 0,
    },
    dependencies: [],
    tags: ['external', 'email', 'sendgrid'],
    environment: 'production',
    region: 'global',
    instances: 0,
  },
  {
    id: 'twilio-api',
    name: 'twilio-api',
    displayName: 'Twilio SMS API',
    tier: 'external',
    version: 'N/A',
    description: 'SMS delivery service',
    owner: 'platform-team@company.com',
    team: 'Platform Engineering',
    endpoint: {
      protocol: 'https',
      host: 'api.twilio.com',
      port: 443,
    },
    health: {
      status: 'healthy',
      uptime: 99.85,
      lastCheck: '2024-01-19T14:30:00Z',
      healthScore: 95,
      incidents: 2,
    },
    metrics: {
      requestsPerSecond: 150,
      avgLatencyMs: 180,
      errorRate: 0.3,
      cpuUsage: 0,
      memoryUsage: 0,
      activeConnections: 0,
    },
    dependencies: [],
    tags: ['external', 'sms', 'twilio'],
    environment: 'production',
    region: 'global',
    instances: 0,
  },
];

// Generate connections from service dependencies
export const connections: ServiceConnection[] = services.flatMap((service) =>
  service.dependencies.map((dep) => ({
    from: service.id,
    to: dep.targetServiceId,
    type: dep.type,
    protocol: dep.protocol,
    latencyMs: dep.latencyMs,
    requestsPerSecond: dep.requestsPerSecond,
    errorRate: dep.errorRate,
    bandwidth: `${(dep.requestsPerSecond * 0.5).toFixed(1)} MB/s`,
    critical: dep.critical,
  }))
);

export const serviceIssues: ServiceIssue[] = [
  {
    id: 'issue-001',
    serviceId: 'user-service',
    severity: 'high',
    type: 'latency',
    title: 'High Database Query Latency',
    description: 'User service experiencing elevated database query times (avg 95ms)',
    detectedAt: '2024-01-19T13:45:00Z',
    affectedServices: ['user-service', 'api-gateway', 'web-app'],
    rootCause: 'Missing database index on users.created_at column causing full table scans',
    recommendation: 'Add composite index on (created_at, user_id) to optimize recent user queries',
  },
  {
    id: 'issue-002',
    serviceId: 'postgres-users',
    severity: 'critical',
    type: 'capacity',
    title: 'Database Connection Pool Near Capacity',
    description: 'User database connection pool at 90% capacity (450/500 connections)',
    detectedAt: '2024-01-19T14:15:00Z',
    affectedServices: ['postgres-users', 'user-service', 'auth-service'],
    rootCause: 'Connection leaks in user-service v1.9.5 not releasing connections properly',
    recommendation: 'Deploy user-service v1.9.6 with connection pool management fixes',
  },
  {
    id: 'issue-003',
    serviceId: 'payment-service',
    severity: 'medium',
    type: 'error_rate',
    title: 'Elevated Error Rate from Stripe API',
    description: 'Payment service seeing 0.35% error rate when calling Stripe API',
    detectedAt: '2024-01-19T12:30:00Z',
    affectedServices: ['payment-service', 'order-service'],
    rootCause: 'Stripe API experiencing intermittent timeouts in us-east-1 region',
    recommendation: 'Implement retry logic with exponential backoff for Stripe API calls',
  },
];

export const topologyLayout: TopologyLayout[] = [
  // Frontend Tier
  { serviceId: 'web-app', x: 100, y: 50, tier: 0 },
  { serviceId: 'mobile-api', x: 300, y: 50, tier: 0 },
  { serviceId: 'cdn', x: 200, y: 150, tier: 0 },

  // Backend Tier 1 - Gateway
  { serviceId: 'api-gateway', x: 200, y: 250, tier: 1 },

  // Backend Tier 2 - Core Services
  { serviceId: 'auth-service', x: 50, y: 400, tier: 2 },
  { serviceId: 'user-service', x: 200, y: 400, tier: 2 },
  { serviceId: 'order-service', x: 350, y: 400, tier: 2 },

  // Backend Tier 3 - Supporting Services
  { serviceId: 'payment-service', x: 280, y: 550, tier: 3 },
  { serviceId: 'inventory-service', x: 420, y: 550, tier: 3 },
  { serviceId: 'notification-service', x: 550, y: 400, tier: 3 },

  // Cache Tier
  { serviceId: 'redis-cache', x: 500, y: 250, tier: 1 },

  // Queue Tier
  { serviceId: 'kafka-events', x: 650, y: 480, tier: 3 },

  // Database Tier
  { serviceId: 'postgres-users', x: 100, y: 650, tier: 4 },
  { serviceId: 'postgres-orders', x: 250, y: 650, tier: 4 },
  { serviceId: 'postgres-payments', x: 400, y: 650, tier: 4 },
  { serviceId: 'postgres-inventory', x: 550, y: 650, tier: 4 },

  // External Services
  { serviceId: 's3-storage', x: 50, y: 550, tier: 3 },
  { serviceId: 'stripe-api', x: 150, y: 750, tier: 5 },
  { serviceId: 'sendgrid-api', x: 650, y: 580, tier: 4 },
  { serviceId: 'twilio-api', x: 750, y: 580, tier: 4 },
];

export const serviceTopology: ServiceTopology = {
  services,
  connections,
  issues: serviceIssues,
  layout: topologyLayout,
  lastUpdated: '2024-01-19T14:30:00Z',
};

export const topologyMetrics: TopologyMetrics = {
  totalServices: services.length,
  healthyServices: services.filter((s) => s.health.status === 'healthy').length,
  degradedServices: services.filter((s) => s.health.status === 'degraded').length,
  downServices: services.filter((s) => s.health.status === 'down').length,
  totalConnections: connections.length,
  criticalConnections: connections.filter((c) => c.critical).length,
  avgLatency: connections.reduce((sum, c) => sum + c.latencyMs, 0) / connections.length,
  avgErrorRate: connections.reduce((sum, c) => sum + c.errorRate, 0) / connections.length,
  totalIssues: serviceIssues.length,
  criticalIssues: serviceIssues.filter((i) => i.severity === 'critical').length,
};
